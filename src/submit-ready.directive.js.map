{"version":3,"file":"submit-ready.directive.js","sourceRoot":"","sources":["submit-ready.directive.ts"],"names":[],"mappings":";;;;;;;;;;;;;;OAAO,EAAC,SAAS,EAAE,YAAY,EAAE,MAAM,EAAE,YAAY,EAAa,UAAU,EAAC,MAAM,eAAe;OAC3F,EAAC,aAAa,EAAE,WAAW,EAAC,MAAM,SAAS;AAgBlD;IAA0C,wCAAa;IAQnD;QACI,iBAAO,CAAC;QANH,cAAS,GAAG,IAAI,YAAY,EAAO,CAAC;QAGpC,gBAAW,GAAG,IAAI,YAAY,EAAO,CAAC;IAI/C,CAAC;IAGD,uCAAQ,GAAR;QACI,IAAI,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC;IAED,qCAAM,GAAN;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAC,UAAU,EAAE,KAAK,EAAC,CAAC,CAAC,CAAC,CAAC;YAC9C,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IAED,0CAAW,GAAX;QACI,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IAChC,CAAC;IA3BD;QAAC,MAAM,EAAE;;2DAAA;IAGT;QAAC,MAAM,EAAE;;6DAAA;IAOT;QAAC,YAAY,CAAC,UAAU,CAAC;;;;wDAAA;IA1B7B;QAAC,SAAS,CAAC;YACP,QAAQ,EAAE,kDAAkD;YAC5D,QAAQ,EAAE,YAAY;YACtB,SAAS,EAAE;gBACP;oBACI,OAAO,EAAE,aAAa;oBACtB,WAAW,EAAE,UAAU,CAAC,cAAM,OAAA,oBAAoB,EAApB,CAAoB,CAAC;iBACtD;gBACD;oBACI,OAAO,EAAE,WAAW;oBACpB,WAAW,EAAE,aAAa;iBAC7B;aACJ;SACJ,CAAC;;4BAAA;IAgCF,2BAAC;AAAD,CAAC,AA/BD,CAA0C,aAAa,GA+BtD","sourcesContent":["import {Directive, HostListener, Output, EventEmitter, OnDestroy, forwardRef} from \"@angular/core\";\nimport {SubmitService, SubmitGroup} from \"./model\";\n\n@Directive({\n    selector: 'form:not([ngNoForm]),ngForm,[ngForm],[formGroup]',\n    exportAs: \"frexSubmit\",\n    providers: [\n        {\n            provide: SubmitService,\n            useExisting: forwardRef(() => SubmitReadyDirective),\n        },\n        {\n            provide: SubmitGroup,\n            useExisting: SubmitService,\n        },\n    ]\n})\nexport class SubmitReadyDirective extends SubmitService implements OnDestroy {\n\n    @Output()\n    readonly preSubmit = new EventEmitter<any>();\n\n    @Output()\n    readonly submitReady = new EventEmitter<any>();\n\n    constructor() {\n        super();\n    }\n\n    @HostListener('ngSubmit')\n    onSubmit() {\n        this.submit();\n    }\n\n    submit(): boolean {\n        this._submitted = true;\n        this.preSubmit.emit(null);\n        if (!this.updateReadyState({emitEvents: false})) {\n            return false;\n        }\n        this.submitReady.emit(null);\n        return true;\n    }\n\n    ngOnDestroy() {\n        this.submitReady.complete();\n    }\n\n}\n"]}